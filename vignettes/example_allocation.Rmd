---
title: "Use example"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Use example}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
library(locationallocation)
# load demo dataset
demo_data_load()
```

## 0. Traveltime based on currently existing facilities

```{r traveltime, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
out_tt <- traveltime(facilities=fountains, bb_area=boundary, dowscaling_model_type="lm", mode="walk", res_output=100)

traveltime_plot(traveltime=out_tt,  bb_area=boundary, facilities = fountains)
```

## 1. Baseline: continuous allocation over area

```{r baseline, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
# allocate to cover 99% of population within 15 minutes walking
output_allocation <- allocation(demand_raster = pop, traveltime_raster=out_tt, bb_area = boundary, facilities=fountains, weights=NULL, objectiveminutes=15, objectiveshare=0.99, heur="max", dowscaling_model_type="lm", mode="walk", res_output=100)

allocation_plot(output_allocation, bb_area = boundary)
```



